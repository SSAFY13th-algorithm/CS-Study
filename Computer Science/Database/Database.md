
# 인덱스
## 인덱스란?
<details>
  <summary><b>인덱스란에 대해 설명해 주세요.</b></summary>  
  
  데이터베이스 인덱스는 데이터 검색 작업의 속도를 향상시키는 자료구조이며, 데이터를 빠르게 찾을 수 있도록 도와줍니다.

특정 컬럼에 대해 생성되며, 이 인덱스는 해당 컬럼의 값과 해당 레코드가 저장된 물리적 위치 정보를 가집니다. 쿼리를 실행하면, 테이블 전체를 스캔하는 대신 인덱스를 먼저 확인하여 필요한 데이터의 위치를 빠르게 찾아낼 수 있습니다.

인덱스는 디스크에 별도의 데이터 구조로 저장되며, 메모리에 로드되어 처리됩니다.

인덱스가 없다면 모든 데이터 페이지를 순차적으로 검색해야 하지만, 인덱스를 사용하면 필요한 데이터가 있는 페이지만 접근할 수 있습니다.
</details>
<br/>
<details>
  <summary><b>인덱스의 장점을 설명해 주세요.</b></summary>
  
  1. 검색 성능 향상  
    인덱스는 대체로 B+tree의 형태로 구성되기 때문에 데이터 조회 연산의 시간 복잡도를 $O(N)$에서 $O(\log{N})$으로 개선합니다.  

  2. 정렬 비용 감소  
    인덱스가 이미 정렬되어 있기 때문에 ORDER BY 절의 정렬 작업이 최적화됩니다. 

  3. join 연산 최적화  
    외래 키에 인덱스를 생성하는 경우 join 연산을 더 효율적으로 수행합니다. 검색 성능 향상의 연장선이라고도 볼 수 있는데, PK 값과 FK 값을 비교할 때 전체 데이터를 확인할 필요 없이 필요한 데이터만 검색하면 되므로 쿼리 성능이 높아지는 것입니다. 
</details>

## 인덱스의 자료구조
<details>
  <summary><b>B Tree</b></summary>

![](/Computer%20Science/Database/image/B-Tree.png)  
  모든 리프 노드가 같은 레벨에 존재하고, 노드 내 데이터는 항상 정렬된 상태를 유지합니다.   
  모든 노드에 데이터를 저장할 수 있고, 리프 노드들이 서로 연결되어 있지 않습니다.   
  내부 노드는 데이터와 키를 함께 저장합니다.   
  노드의 데이터 수가 n개라면 자식 노드의 개수는 n+1개입니다.
</details>
<br/>
<details>
  <summary><b>B+Tree</b></summary>

![](/Computer%20Science/Database/image/B__Tree.png)  
  리프 노드에만 데이터를 저장합니다.   
  리프 노드들은 연결 리스트로 연결되어 순차 접근이 용이합니다.   
  따라서, 내부 노드는 키 값만 저장하며 인덱스 역할만 수행합니다. 
</details>
<br/>

<details>
    <summary><b>Hash Table</b></summary>
해시 함수를 사용하여 키를 해싱하고, 해시 테이블에 저장합니다. <br/> 
해시 테이블은 해시 값과 해당하는 데이터 레코드의 포인터를 저장합니다. <br/> 
따라서 검색 시 해시 값을 계산하여 해당하는 위치로 바로 이동하여 데이터를 찾을 수 있습니다.  <br/>
때문에 일반적으로 $O(1)$ 의 시간 복잡도를 가지게 됩니다.
</details>
<br/>
<details>
    <summary><b>B-Tree와 B+Tree 인덱스의 차이점을 설명하고, 각각 어떤 상황에서 더 효율적인지 설명해 주세요.</b></summary>
B-Tree와 B+Tree의 주요 차이점은 데이터 저장 방식과 I/O 작업 방식의 차이가 있습니다. B-Tree는 모든 노드에 키와 데이터를 함께 저장하는 반면, B+Tree는 내부 노드에 키만 저장하고 실제 데이터는 리프 노드에만 저장합니다. 따라서 B-tree는 단일 레코드 검색이 주로 필요한 상황에서 유리하고, B+Tree는 범위 검색이 빈번한 곳에서 효율적입니다. 

B+Tree에서 단일 레코드 검색 시, 리프 노드까지 가야 하므로 B-Tree에 비해 느리고 B-Tree에서 범위 검색 시 시작점과 끝점의 페이지를 확인해야 해서 B+Tree에 비해 느립니다.
</details>
<br/>
<details>
    <summary><b>B-Tree와 Hash 인덱스의 차이점을 설명해주세요.</b></summary>
해시테이블은 단일 행 접근은 빠를 수 있으나 key값이 달라지면 해시펑션을 거쳐 value가 달라지기 때문에 다중 행 접근에 대해서 불가한 점이 있습니다. <br/>
따라서 이와 같은 특성으로 단일 행 접근은 해시테이블보다 느릴지라도 다중 행 접근과 함께 사용할 수 있다는 장점이 B트리에 존재합니다.
</details>